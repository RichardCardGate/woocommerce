(()=>{"use strict";let e=window.wc.wcBlocksRegistry,t=window.wp.i18n,a=window.wc.wcSettings,o=window.wp.htmlEntities,c=window.React,n=(window.JSON,(0,a.getSetting)("cardgatepaysafecard_data",{})),l=(0,t.__)("Paysafecard","wc_payment_method_cardgatepaysafecard"),s=(0,o.decodeEntities)(n.title)||l,m=e=>{let[t,a]=(0,c.useState)(""),{eventRegistration:l,emitResponse:s}=e,{onPaymentSetup:m}=l;return c.useEffect(()=>{let t=(e,t)=>{var a,o,c="<span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+(t+e)+"</span>";jQuery(".wc-block-components-totals-footer-item .wc-block-formatted-money-amount:first").replaceWith(c)},a=(e,t)=>{var a,o,c="<span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+(t+e)+"</span>";jQuery("div.wp-block-woocommerce-checkout-order-summary-taxes-block.wc-block-components-totals-wrapper > div > span.wc-block-formatted-money-amount.wc-block-components-formatted-money-amount.wc-block-components-totals-item__value:first").replaceWith(c)};jQuery.ajax({url:n.feeUrl,method:"POST",data:{action:"wp_ajax_cardgate_checkout_fees",method:e.activePaymentMethod},complete:function e(t,a){},success:function e(o,c,n){let l=jQuery(".wc-block-components-totals-fees");if(o.data.amount){let s="<div class='wc-block-components-totals-item wc-block-components-totals-fees'><span class='wc-block-components-totals-item__label'>"+o.data.name+"</span><span class='wc-block-formatted-money-amount wc-block-components-formatted-money-amount wc-block-components-totals-item__value'>"+o.data.currency+o.data.amount.toFixed(2).replace(".",",")+"</span><div class='wc-block-components-totals-item__description'></div></div>";l.length?(l.replaceWith(s),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency)):(jQuery(".wc-block-components-totals-item:first").after(s),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency))}else null==l||l.hide(),t(o.data.newTotal.toFixed(2).replace(".",","),o.data.currency),a(o.data.totalTax.toFixed(2).replace(".",","),o.data.currency)},error:function e(t,a,o){console.warn(a,o)}})}),c.createElement("div",null,(0,o.decodeEntities)(n.description||""))},r={name:"cardgatepaysafecard",label:c.createElement(e=>{var t=c.createElement("img",{src:n.icon,width:28,height:24,style:{display:"inline"}});return n.show_icon||(t=null),c.createElement("span",{className:"wc-block-components-payment-method-label wc-block-components-payment-method-label--with-icon"},t,(0,o.decodeEntities)(n.title)||l)},null),content:c.createElement(m,null),edit:c.createElement(m,null),icons:null,canMakePayment:e=>!0,ariaLabel:s,supports:{features:c.supports}};(0,e.registerPaymentMethod)(r)})();